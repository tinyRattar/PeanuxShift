-- title:  game title
-- author: game developer
-- desc:   short description
-- script: lua


player = {x=50,y=50,hp=100,state=0,ti1=0}
function player:move(dx,dy)
 if(self.state~=0) then return end
 -- todo: collide
 self.x = self.x+dx
 self.y = self.y+dy
end
function player:attack()
	if(self.state==0) then
		self.state=1
		self.ti1=30
		-- todo: attack check
	end
end
function player:update()
	if(self.ti1>0) then
		self.ti1 = self.ti1 - 1
		if(self.ti1<=0) then self.state=0 end
	end
end
function player:draw()
	if(self.state==0) then
		spr(256+t//20%3,self.x,self.y,9,1,0,0,1,2)
	elseif(self.state==1) then
		spr(261-self.ti1//16%2 * 2,self.x,self.y,9,1,0,0,2,2)
		trace(261-self.ti1//16%2 * 2)
	end
end

t=0
x=96
y=24

function TIC()
  -- controller
	if btn(0) then player:move(0,-1) end
	if btn(1) then player:move(0,1) end
	if btn(2) then player:move(-1,0) end
	if btn(3) then player:move(1,0) end

	if btn(4) then player:attack() end
	-- update
	player:update()
	

	-- draw
	cls(13)
	-- draw player
	player:draw()
	
	--spr(1+t%60//30*2,x,y,14,3,0,0,2,2)
	
	print("HELLO WORLD!",84,84)
	t=t+1
	--trace("test"..a)
end

-- <SPRITES>
-- 000:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 001:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 002:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 003:99999999999999999888888998eeee8998e0e08998eeee899888888999888889
-- 004:999999999999999999999999f999999999f99999999f9999f99999999f99f999
-- 005:99999999999999999888888998eeee8998e0e08998eeee899888888999888889
-- 006:9999999999999999999999999999999999999999999999999999999999999999
-- 016:998888f999888777998888e99988889999899899998998999999999999999999
-- 017:998888f999888777998888e99988889999899899999998999999999999999999
-- 018:998888f999888777998888e99988889999899899998999999999999999999999
-- 019:99888899998888899988889e9988889999899899998998999999999999999999
-- 020:9999f999799999997fffff997999999999999999999999999999999999999999
-- 021:99888899998888899988889e9988889999899899998998999999999999999999
-- 022:99999999799999997fffff997999999999999999999999999999999999999999
-- </SPRITES>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:140c1c44243430346d4e4a4e854c30346524d04648757161597dced27d2c8595a16daa2cd2aa996dc2cadad45edeeed6
-- </PALETTE>


-- <SPRITES>
-- 000:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 001:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 002:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 003:99999999999999999888888998eeee8998e0e08998eeee899888888999888889
-- 004:999999999999999999999999f999999999f99999999f9999f99999999f99f999
-- 005:99999999999999999888888998eeee8998e0e08998eeee899888888999888889
-- 006:9999999999999999999999999999999999999999999999999999999999999999
-- 016:998888f999888777998888e99988889999899899998998999999999999999999
-- 017:998888f999888777998888e99988889999899899999998999999999999999999
-- 018:998888f999888777998888e99988889999899899998999999999999999999999
-- 019:99888899998888899988889e9988889999899899998998999999999999999999
-- 020:9999f999799999997fffff997999999999999999999999999999999999999999
-- 021:99888899998888899988889e9988889999899899998998999999999999999999
-- 022:99999999799999997fffff997999999999999999999999999999999999999999
-- 032:99999999999999999888888998eeee8998e0e08998eeee899888888999888899
-- 033:99999999999999999888888998eeee8998e0e08998eeee899888888999888899
-- 048:99878ef999887899998f879999f88f999f899899f98f98999ff9999999999999
-- 049:99878e9999887899998f879999f888999f899899f98998999999999999999999
-- </SPRITES>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:140c1c44243430346d4e4a4e854c30346524d04648757161597dced27d2c8595a16daa2cd2aa996dc2cadad45edeeed6
-- </PALETTE>


-- <SPRITES>
-- 000:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 001:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 002:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 003:99999999999999999888888998eeee8998e0e08998eeee899888888999888889
-- 004:999999999999999999999999f999999999f99999999f9999f99999999f99f999
-- 005:99999999999999999888888998eeee8998e0e08998eeee899888888999888889
-- 006:9999999999999999999999999999999999999999999999999999999999999999
-- 016:998888f999888777998888e99988889999899899998998999999999999999999
-- 017:998888f999888777998888e99988889999899899999998999999999999999999
-- 018:998888f999888777998888e99988889999899899998999999999999999999999
-- 019:99888899998888899988889e9988889999899899998998999999999999999999
-- 020:9999f999799999997fffff997999999999999999999999999999999999999999
-- 021:99888899998888899988889e9988889999899899998998999999999999999999
-- 022:99999999799999997fffff997999999999999999999999999999999999999999
-- </SPRITES>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:140c1c44243430346d4e4a4e854c30346524d04648757161597dced27d2c8595a16daa2cd2aa996dc2cadad45edeeed6
-- </PALETTE>


-- <SPRITES>
-- 000:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 001:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 002:99999999999999999888888998eeee8998e0e0f998eeeef9988888f9998888f9
-- 003:99999999999999999888888998eeee8998e0e08998eeee899888888999888889
-- 004:999999999999999999999999f999999999f99999999f9999f99999999f99f999
-- 005:99999999999999999888888998eeee8998e0e08998eeee899888888999888889
-- 006:9999999999999999999999999999999999999999999999999999999999999999
-- 016:998888f999888777998888e99988889999899899998998999999999999999999
-- 017:998888f999888777998888e99988889999899899999998999999999999999999
-- 018:998888f999888777998888e99988889999899899998999999999999999999999
-- 019:99888899998888899988889e9988889999899899998998999999999999999999
-- 020:9999f999799999997fffff997999999999999999999999999999999999999999
-- 021:99888899998888899988889e9988889999899899998998999999999999999999
-- 022:99999999799999997fffff997999999999999999999999999999999999999999
-- </SPRITES>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <PALETTE>
-- 000:140c1c44243430346d4e4a4e854c30346524d04648757161597dced27d2c8595a16daa2cd2aa996dc2cadad45edeeed6
-- </PALETTE>

